//数组去重方法
var arrlength=arrpro.match(/[A-Z0-9]/g);
var j=0;
if(arrlength!=null){
  for(var i=1;i<arrlength.length;i++){
    if(arrlength[j]==arrlength[i]){
      arrlength.splice(j,1)									
      j++;
    }	
  }	
  //字母替换方法
  arrlength.forEach(function(e){
    punctuations_pro=punctuations_new.replace(eval("/("+e+")/g"),"<span>"+e+"</span>");
    punctuations_new=punctuations_pro;
  })
}

// 判断是否来自微信浏览器
var isWeiXin = function() {
	var ua = window.navigator.userAgent.toLowerCase();
	console.log(ua); //mozilla/5.0 (iphone; cpu iphone os 9_1 like mac os x) applewebkit/601.1.46 (khtml, like gecko)version/9.0 mobile/13b143 safari/601.1
	if(ua.match(/MicroMessenger/i) == 'micromessenger') {
		return true;
	} else {
		return false;
	}
};
var onVisibilityChanged = function() {
	if(!isWeiXin()) {
		console.log("不是来自微信内置浏览器");
		var visitState = document.visibilityState;
		var needReloadWhenShow = localStorage.getItem('need_reload_when_show');
		if((!visitState || visitState == 'visible') && needReloadWhenShow == 1) {
			localStorage.setItem('need_reload_when_show', '0');
			var href = location.pathname;
			if(href) {
				location.replace(href + '?' + new Date().getTime());
			} else {
				location.reload(true);
			}
		}
	}
};
// 用户退到后台或从后台返回触发
document.addEventListener("webkitvisibilitychange", onVisibilityChanged, false);
document.addEventListener("visibilitychange", onVisibilityChanged, false);

//禁止移动端上下拉取
var overscroll = function(el) {
	el.addEventListener('touchstart', function() {
	var top = el.scrollTop
	var totalScroll = el.scrollHeight
	var currentScroll = top + el.offsetHeight;
	    if(top === 0) {
		el.scrollTop = 1;
	    } else if(currentScroll === totalScroll) {
		el.scrollTop = top - 1;
	    }
	});
	el.addEventListener('touchmove', function(evt) {
	    if(el.offsetHeight < el.scrollHeight)
		evt._isScroller = true;
    });
}
overscroll(document.querySelector('.Muli ul'));
document.body.addEventListener('touchmove', function(evt) {
	if(!evt._isScroller) {
		evt.preventDefault();
	}
});

//判断是不是手机端
var isMobile = {
Android: function () {
    return navigator.userAgent.match(/Android/i) ? true : false;
},
BlackBerry: function () {
    return navigator.userAgent.match(/BlackBerry/i) ? true : false;
},
iOS: function () {
    return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
},
Windows: function () {
    return navigator.userAgent.match(/IEMobile/i) ? true : false;
},
any: function () {
    return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
}
};
if (isMobile.any()) {
//如果是手机访问的话的操作！
}

//js原型链继承
var func=function(){};
var obj=new func();
//函数原型的构造函数完全等于对象原的构造函数
func.prototype.constructor===obj.__proto__.constructor;
//函数原型的构造函数完全等于本身
func.prototype.constructor===func;

//干预：阻止跨2G的负载，通过document.write插入的解析器阻塞脚本给2G用户
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260553427'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1260553427' type='text/javascript'%3E%3C/script%3E"));</script>

//上传图片缩略图
function getObjectURL(file) {
	var url = null;
	if(window.createObjectURL != undefined) { // basic
		url = window.createObjectURL(file);
	} else if(window.URL != undefined) { // mozilla(firefox)
		url = window.URL.createObjectURL(file);
	} else if(window.webkitURL != undefined) { // webkit or chrome
		url = window.webkitURL.createObjectURL(file);
	}
	return url;
}
$('#thumbnail').change(function() {
	var eImg = $('<img />');
	eImg.attr('src', getObjectURL($(this)[0].files[0])); // 或 this.files[0] this->input
	$(this).after(eImg);
});
